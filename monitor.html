<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Monitor - Natthanan</title>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="monitor-bg">

    <header class="site-header">
        <div class="container header-container">
           <!-- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ <div class="logo"> ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå index.html ‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏Å‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ -->
<div class="logo">
    <a href="index.html">
        <!-- ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏•‡∏¥‡∏á‡∏Å‡πå src ‡πÄ‡∏õ‡πá‡∏ô path ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì -->
        <!-- ‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡∏ú‡∏°‡πÉ‡∏™‡πà‡∏£‡∏π‡∏õ Placeholder ‡πÑ‡∏ß‡πâ‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏†‡∏≤‡∏û‡∏Å‡πà‡∏≠‡∏ô -->
        <img src="‡πÇ‡∏•‡πÇ‡∏Å‡πâ.png" alt="Natthanan Logo" class="site-logo">
        
        <!-- ‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πà‡∏≠‡∏ó‡πâ‡∏≤‡∏¢‡πÇ‡∏•‡πÇ‡∏Å‡πâ ‡πÉ‡∏´‡πâ‡πÉ‡∏™‡πà‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ (‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏´‡πâ‡∏•‡∏ö div ‡∏ô‡∏µ‡πâ‡∏ó‡∏¥‡πâ‡∏á) -->
        <div class="logo-text">
            <h1>WellnessHUB ‡πÄ‡∏ó‡∏®‡∏ö‡∏≤‡∏•‡∏ï‡∏≥‡∏ö‡∏•‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏´‡∏•‡∏≤‡∏ô</h1>
            <span>‡∏≠‡∏≥‡πÄ‡∏†‡∏≠‡∏ö‡πâ‡∏≤‡∏ô‡∏ï‡∏≤‡∏Ç‡∏∏‡∏ô ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏™‡∏∏‡∏£‡∏≤‡∏©‡∏é‡∏£‡πå‡∏ò‡∏≤‡∏ô‡∏µ</span>
        </div>
    </a>
</div>
            
            <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ -->
            <button class="mobile-menu-btn" onclick="toggleMenu()">
                <i class="fas fa-bars"></i>
            </button>

            <!-- ‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å -->
            <nav class="main-nav" id="mainNav">
    <ul>
                    <li><a href="index.html">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a></li>
                    <li><a href="monitor.html">‡∏°‡∏≠‡∏ô‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</a></li>
                    <li><a href="report.html">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</a></li>
                    <li><a href="chat.html">AI ‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤</a></li>
        <li><a href="#" class="btn-primary">‡πÇ‡∏ó‡∏£: 08X-XXX-XXXX</a></li>
                </ul>
</nav>
        </div>
    </header>


    <main class="main-content">
        <div class="container-fluid" style="padding: 0 40px;">
            <div class="monitor-header">
                <h2><i class="fas fa-heartbeat"></i> ‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û Real-time</h2>
                <div class="live-indicator">
                    <div class="blink-dot"></div> Live
                </div>
            </div>

            <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á -->
            <div class="filter-bar">
                <button class="filter-btn active" onclick="setFilter('all', this)">
                    <i class="fas fa-border-all"></i> ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                </button>
                <button class="filter-btn" onclick="setFilter('citizen', this)">
                    <i class="fas fa-users"></i> ‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô
                </button>
                <button class="filter-btn" onclick="setFilter('tourist', this)">
                    <i class="fas fa-suitcase-rolling"></i> ‡∏ô‡∏±‡∏Å‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß
                </button>
            </div>

            <!-- Grid ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• 4 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå -->
            <div class="monitor-grid-4-col" id="mainMonitorGrid"></div>

        </div>
    </main>

    <script src="script.js"></script>
    <script>
        // --- JAVASCRIPT Logic ---
        
        let persons = JSON.parse(localStorage.getItem('natthanan_persons')) || [];
        let currentFilter = 'all'; 

        function setFilter(type, btnElement) {
            currentFilter = type;
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            btnElement.classList.add('active');
            initDashboard();
        }

        function initDashboard() {
            const container = document.getElementById('mainMonitorGrid');
            container.innerHTML = '';

            let displayList = persons;
            if (currentFilter !== 'all') {
                displayList = persons.filter(p => p.type === currentFilter);
            }

            if (displayList.length === 0) {
                container.innerHTML = `<div class="empty-state" style="grid-column: 1/-1;">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ô‡∏µ‡πâ</div>`;
                return;
            }

            displayList.forEach((p) => {
                const originalIndex = persons.indexOf(p);
                
                // ‡∏õ‡∏∏‡πà‡∏° SOS (‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ô‡∏±‡∏Å‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß)
                let sosBtn = '';
                if (p.type === 'tourist') {
                    sosBtn = `<button class="btn-sos-compact" onclick="sendSOS('${p.name}')">SOS</button>`;
                }

                // ‡∏™‡∏£‡πâ‡∏≤‡∏á HTML Card ‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà (‡πÄ‡∏ô‡πâ‡∏ô‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢)
                const cardHtml = `
                <div class="monitor-card-clean">
                    <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏±‡∏ß‡∏Å‡∏≤‡∏£‡πå‡∏î -->
                    <div class="card-head-clean">
                        <div class="user-info">
                            <img src="${p.photo}" class="avatar-clean">
                            <div class="text-info">
                                <div class="name-large">${p.name}</div>
                                <div class="role-badge ${p.type}">${p.type === 'citizen' ? '‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô' : '‡∏ô‡∏±‡∏Å‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß'}</div>
                            </div>
                        </div>
                        ${sosBtn}
                    </div>
                    
                    <!-- ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û (Grid 2 ‡∏ä‡πà‡∏≠‡∏á‡πÉ‡∏´‡∏ç‡πà) -->
                    <div class="vitals-grid-clean">
                        
                        <!-- ‡∏ä‡πà‡∏≠‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô (BP) -->
                        <!--<div class="vital-box border-right">
                            <div class="v-label"><i class="fas fa-tachometer-alt"></i> ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô (BP)</div>
                            <div class="v-value-big" id="bp-${originalIndex}">--/--</div>
                            <div class="v-unit">mmHg</div>
                        </div> -->

                        <div class="vital-box border-right">
                            <div class="v-label"><i class="fas fa-tachometer-alt"></i> Spo2</div>
                            <div class="v-value-big" id="spo2-${originalIndex}">--/--</div>
                            <div class="v-unit">mmHg</div>
                        </div>

                        <!-- ‡∏ä‡πà‡∏≠‡∏á‡∏´‡∏±‡∏ß‡πÉ‡∏à (HR) -->
                        <div class="vital-box">
                            <div class="v-label"><i class="fas fa-heart"></i> ‡∏´‡∏±‡∏ß‡πÉ‡∏à (HR)</div>
                            <div class="v-value-big" id="hr-${originalIndex}">--</div>
                            <div class="v-unit">BPM</div>
                        </div>

                    </div>

                    <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡πâ‡∏≤‡∏¢ (‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≠‡∏á SpO2, Temp) -->
                    <div class="footer-stats">
                        <!--<div class="stat-item">
                            <span>SpO2:</span> <strong id="spo2-${originalIndex}" style="color:#009688">--%</strong>
                        </div> -->
                        <div class="stat-item">
                            <span>Temp:</span> <strong id="temp-${originalIndex}">--¬∞C</strong>
                        </div>
                    </div>
                </div>`;
                
                container.innerHTML += cardHtml;
            });
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏∏‡πà‡∏°‡∏Ñ‡πà‡∏≤
        function simulateVitals() {
            if (persons.length === 0) return;
            persons.forEach((p, index) => {
                const hr = Math.floor(Math.random() * (110 - 60 + 1)) + 60;
                const sys = Math.floor(Math.random() * (140 - 110 + 1)) + 110;
                const dia = Math.floor(Math.random() * (90 - 70 + 1)) + 70;
                const spo2 = Math.floor(Math.random() * (100 - 96 + 1)) + 96;
                const temp = (Math.random() * (37.5 - 36.5) + 36.5).toFixed(1);

                const hrEl = document.getElementById(`hr-${index}`);
                if(hrEl) {
                    hrEl.innerText = hr;
                    // document.getElementById(`bp-${index}`).innerText = `${sys}/${dia}`;
                    document.getElementById(`spo2-${index}`).innerText = `${spo2}%`;
                    document.getElementById(`temp-${index}`).innerText = `${temp}¬∞C`;

                    // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ñ‡πâ‡∏≤‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÄ‡∏ï‡πâ‡∏ô‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏Å‡∏¥‡∏ô
                    if(hr > 100) {
                        hrEl.style.color = '#d32f2f'; // ‡πÅ‡∏î‡∏á
                        hrEl.classList.add('pulse-alert');
                    } else {
                        hrEl.style.color = '#2c3e50'; // ‡∏™‡∏µ‡πÄ‡∏Ç‡πâ‡∏°‡∏õ‡∏Å‡∏ï‡∏¥
                        hrEl.classList.remove('pulse-alert');
                    }
                }
            });
        }

        function sendSOS(name) {
            alert(`üö® ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô: ‡∏Ñ‡∏∏‡∏ì ${name} ‡∏Ç‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠!
            ‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏ó‡∏µ‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà`);
            
        }

        initDashboard();
        simulateVitals();
        setInterval(simulateVitals, 2000);
    </script>
</body>
</html>